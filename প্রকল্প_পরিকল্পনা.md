# অটোপে অ্যাপ - সম্পূর্ণ পরিকল্পনা

## প্রকল্পের উদ্দেশ্য
বিকাশ এবং নগদ থেকে আসা টাকা গ্রহণের এসএমএস স্বয়ংক্রিয়ভাবে পড়ে Firebase-এ সংরক্ষণ করা।

## মূল বৈশিষ্ট্য
1. **এসএমএস পড়া**: ফোনে আসা সকল এসএমএস রিয়েল-টাইমে পড়া
2. **এসএমএস ফিল্টারিং**: শুধুমাত্র বিকাশ/নগদ থেকে আসা টাকা গ্রহণের এসএমএস শনাক্ত করা
3. **ডেটা এক্সট্রাকশন**: এসএমএস থেকে পরিমাণ, নম্বর, পদ্ধতি, ট্রানজেকশন আইডি বের করা
4. **Firebase সংরক্ষণ**: Payments কালেকশনে ডেটা পাঠানো
5. **ব্যাকগ্রাউন্ড সার্ভিস**: অ্যাপ বন্ধ থাকলেও কাজ করা

## প্রযুক্তিগত স্ট্যাক

### Flutter প্যাকেজসমূহ
1. **firebase_core**: Firebase ইনিশিয়ালাইজেশন
2. **cloud_firestore**: Firestore ডাটাবেস
3. **telephony** বা **sms_advanced**: এসএমএস পড়া এবং শোনা
4. **permission_handler**: পারমিশন ম্যানেজমেন্ট
5. **flutter_background_service** বা **workmanager**: ব্যাকগ্রাউন্ড সার্ভিস

### প্রয়োজনীয় পারমিশন (Android)
- `READ_SMS`: এসএমএস পড়ার জন্য
- `RECEIVE_SMS`: নতুন এসএমএস রিসিভ করার জন্য
- `READ_PHONE_STATE`: ফোন স্টেট অ্যাক্সেস
- `INTERNET`: Firebase সংযোগ
- `FOREGROUND_SERVICE`: ব্যাকগ্রাউন্ড সার্ভিস চালানো

## প্রকল্প কাঠামো

```
lib/
├── main.dart                       # অ্যাপ এন্ট্রি পয়েন্ট
├── services/
│   ├── sms_service.dart           # এসএমএস পড়া ও শোনা
│   ├── firebase_service.dart      # Firebase অপারেশন
│   ├── parser_service.dart        # এসএমএস পার্স করা
│   └── background_service.dart    # ব্যাকগ্রাউন্ড সার্ভিস
├── models/
│   └── payment_model.dart         # পেমেন্ট ডেটা মডেল
├── utils/
│   ├── constants.dart             # কনস্ট্যান্ট ভ্যালু
│   └── permissions.dart           # পারমিশন হ্যান্ডলার
└── screens/
    ├── home_screen.dart           # হোম স্ক্রিন
    └── settings_screen.dart       # সেটিংস স্ক্রিন
```

## বাস্তবায়ন ধাপ

### ধাপ ১: Firebase সেটআপ
- Firebase প্রকল্প তৈরি করা
- Android অ্যাপ রেজিস্টার করা
- `google-services.json` ফাইল ডাউনলোড ও যোগ করা
- Firebase SDK কনফিগার করা
- Firestore ডাটাবেস তৈরি করা
- `payments` কালেকশন তৈরি করা

### ধাপ ২: প্রয়োজনীয় প্যাকেজ যোগ করা
`pubspec.yaml` ফাইলে নিম্নলিখিত ডিপেন্ডেন্সি যোগ করা:
```yaml
dependencies:
  firebase_core: ^latest
  cloud_firestore: ^latest
  telephony: ^latest
  permission_handler: ^latest
  flutter_background_service: ^latest
```

### ধাপ ৩: Android Manifest কনফিগারেশন
`android/app/src/main/AndroidManifest.xml` এ:
- প্রয়োজনীয় পারমিশন যোগ করা
- SMS রিসিভার যোগ করা
- ফোরগ্রাউন্ড সার্ভিস পারমিশন যোগ করা

### ধাপ ৪: ডেটা মডেল তৈরি
`PaymentModel` ক্লাস তৈরি করা যেখানে থাকবে:
- `amount`: টাকার পরিমাণ
- `senderNumber`: প্রেরকের নম্বর
- `method`: বিকাশ/নগদ
- `transactionId`: ট্রানজেকশন আইডি
- `timestamp`: সময়
- `rawMessage`: মূল এসএমএস

### ধাপ ৫: এসএমএস পার্সার সার্ভিস
বিকাশ এবং নগদের এসএমএস প্যাটার্ন শনাক্ত করে ডেটা বের করার লজিক:

**বিকাশ এসএমএস প্যাটার্ন:**
- প্রেরক: `bKash` বা নির্দিষ্ট নম্বর
- টাকা গ্রহণ কিওয়ার্ড: "received", "পেয়েছেন", "TrxID"
- প্যাটার্ন: `BDT XX,XXX.XX`, `TrxID XXXXXXXXXX`, `from XXXXXXXXXXX`

**নগদ এসএমএস প্যাটার্ন:**
- প্রেরক: `NAGAD` বা নির্দিষ্ট নম্বর
- টাকা গ্রহণ কিওয়ার্ড: "received", "পেয়েছেন"
- প্যাটার্ন: `Tk. XX,XXX.XX`, Transaction ID প্যাটার্ন

### ধাপ ৬: Firebase সার্ভিস
- Firebase ইনিশিয়ালাইজেশন
- Firestore-এ `payments` কালেকশনে ডেটা যোগ করার মেথড
- ডুপ্লিকেট ট্রানজেকশন চেক করা (transaction ID দিয়ে)

### ধাপ ৭: এসএমএস সার্ভিস
- রানটাইম পারমিশন রিকোয়েস্ট
- এসএমএস ব্রডকাস্ট রিসিভার সেটআপ
- নতুন এসএমএস আসলে কলব্যাক ফাংশন
- এসএমএস পার্স করে Firebase-এ পাঠানো

### ধাপ ৮: ব্যাকগ্রাউন্ড সার্ভিস
- ফোরগ্রাউন্ড সার্ভিস তৈরি করা
- অ্যাপ বন্ধ থাকলেও সার্ভিস চালু রাখা
- নোটিফিকেশন দেখানো যে সার্ভিস চলছে
- ডিভাইস রিস্টার্টের পর অটো-স্টার্ট

### ধাপ ৯: UI তৈরি
**হোম স্ক্রিন:**
- সার্ভিস চালু/বন্ধ করার বাটন
- শেষ কয়েকটি পেমেন্ট দেখানো
- আজকের মোট আয় দেখানো
- সার্ভিস স্ট্যাটাস দেখানো

**সেটিংস স্ক্রিন:**
- পারমিশন চেক ও রিকোয়েস্ট
- Firebase সংযোগ স্ট্যাটাস
- টেস্ট এসএমএস পার্স করার অপশন

### ধাপ ১০: টেস্টিং
- পারমিশন টেস্টিং
- এসএমএস পার্সিং টেস্টিং (বিভিন্ন ফরম্যাটের এসএমএস)
- Firebase কানেকশন টেস্টিং
- ব্যাকগ্রাউন্ড সার্ভিস টেস্টিং
- ডিভাইস রিস্টার্ট টেস্টিং

## Firestore ডাটাবেস স্ট্রাকচার

```
payments (collection)
  └── {documentId}
        ├── amount: number
        ├── senderNumber: string
        ├── method: string (bkash/nagad)
        ├── transactionId: string
        ├── timestamp: timestamp
        ├── rawMessage: string
        └── deviceId: string (optional)
```

## নিরাপত্তা বিবেচনা

1. **Firestore Rules**: শুধুমাত্র authenticated ব্যবহারকারীরা লিখতে পারবে
2. **Sensitive Data**: ব্যক্তিগত তথ্য এনক্রিপ্ট করা
3. **Permission Handling**: শুধু প্রয়োজনীয় পারমিশন নেওয়া
4. **Error Handling**: সকল এরর লগ করা এবং হ্যান্ডেল করা

## অপটিমাইজেশন

1. **Batch Processing**: একাধিক এসএমএস একসাথে পাঠানো
2. **Offline Support**: ইন্টারনেট না থাকলে লোকালে সেভ করে পরে পাঠানো
3. **Duplicate Prevention**: একই ট্রানজেকশন দুইবার সেভ না করা
4. **Battery Optimization**: ব্যাটারি সাশ্রয়ী ব্যাকগ্রাউন্ড সার্ভিস

## চ্যালেঞ্জ এবং সমাধান

### চ্যালেঞ্জ ১: এসএমএস ফরম্যাট পরিবর্তন
**সমাধান**: নমনীয় regex প্যাটার্ন ব্যবহার করা এবং একাধিক প্যাটার্ন সাপোর্ট করা

### চ্যালেঞ্জ ২: ব্যাকগ্রাউন্ড সার্ভিস কিল হওয়া
**সমাধান**: ফোরগ্রাউন্ড সার্ভিস ব্যবহার করা এবং অটো-রিস্টার্ট ইমপ্লিমেন্ট করা

### চ্যালেঞ্জ ৩: Android 13+ পারমিশন
**সমাধান**: সঠিক পারমিশন রিকোয়েস্ট ফ্লো এবং ব্যাখ্যা দেওয়া

### চ্যালেঞ্জ ৪: ইন্টারনেট সংযোগ
**সমাধান**: লোকাল ডাটাবেস (Hive/SQLite) ব্যবহার করে অফলাইন সাপোর্ট

## ভবিষ্যৎ উন্নয়ন

1. অন্যান্য মোবাইল ব্যাংকিং সেবা যোগ করা (রকেট, উপায়)
2. খরচের এসএমএসও ট্র্যাক করা
3. ড্যাশবোর্ড ও রিপোর্ট তৈরি করা
4. একাধিক ডিভাইস সাপোর্ট
5. ওয়েব ড্যাশবোর্ড তৈরি করা
6. অটো-অ্যাকাউন্টিং সিস্টেম

## প্রয়োজনীয় সময়

- Firebase সেটআপ: ১ ঘণ্টা
- প্যাকেজ ও কনফিগারেশন: ১-২ ঘণ্টা
- কোর ফিচার ডেভেলপমেন্ট: ৪-৬ ঘণ্টা
- UI ডিজাইন: ২-৩ ঘণ্টা
- টেস্টিং ও ডিবাগিং: ৩-৪ ঘণ্টা
- **মোট আনুমানিক সময়: ১১-১৬ ঘণ্টা**

## শুরু করার জন্য প্রথম পদক্ষেপ

1. Firebase Console-এ নতুন প্রকল্প তৈরি করুন
2. Android অ্যাপ রেজিস্টার করুন
3. `google-services.json` ডাউনলোড করুন
4. প্রয়োজনীয় প্যাকেজ ইনস্টল করুন
5. পারমিশন সেটআপ করুন
6. ডেমো এসএমএস পার্সার দিয়ে শুরু করুন

---

**নোট**: এই অ্যাপটি শুধুমাত্র ব্যক্তিগত ব্যবহারের জন্য। অন্যের এসএমএস পড়া আইনত দণ্ডনীয় অপরাধ। ব্যবহারকারীর নিজের ফোনে ব্যবহারের জন্য তৈরি করা হচ্ছে।
